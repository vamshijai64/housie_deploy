<app-loader [type]=2 *ngIf="formSubmitted"></app-loader>
<div class="container-fluid bg-themeblue">
    <div class="row justify-content-center">
        <div class="col-md-6 col-12 col-sm-12 col-lg-6 my-auto">
            <div class="row h-100">
                <div class="col-12 my-auto">
                    <div class="card shadow px-4 mx-auto div-login">
                        <div class="card-body">
                            <div class="text-center pb-2 logo">
                                <img class="img-fluid mb-2" src="assets/img/logo.png" alt="Logo">
                            </div>
                            <form [formGroup]="forgetPassword" ngNativeValidate autocomplete="off" method="">
                                <div class="form-group">
                                    <div class="input-group" *ngIf="forgetPassword.get('otp')?.disabled">
                                        <span class="input-group-prepend">
                                            <span class="input-group-text"><i class="fas fa-user"></i></span>
                                        </span>
                                        <input type="email" name="email" #e1 required id="email" formControlName="email"
                                            autocomplete="off" class="form-control input-sm rounded-0"
                                            placeholder="Email">
                                    </div>
                                    <div *ngIf="formFieldValidator('email')" class="text-danger">
                                        <span *ngIf="formFieldErrors('email')?.hasOwnProperty('required')">
                                            Email is required
                                        </span>
                                        <span *ngIf="formFieldErrors('email')?.hasOwnProperty('pattern')">
                                            Invalid pattern
                                        </span>
                                    </div>
                                </div>

                                <div class="form-group" *ngIf="!forgetPassword.get('otp')?.disabled">
                                    <div class="input-group">
                                        <input type="otp" name="otp" #e1 required id="otp" formControlName="otp"
                                            autocomplete="off" class="form-control input-sm rounded-0"
                                            placeholder="Otp">
                                    </div>
                                    <div *ngIf="formFieldValidator('otp')" class="text-danger">
                                        <span *ngIf="formFieldErrors('otp')?.hasOwnProperty('required')">
                                            OTP is required
                                        </span>
                                    </div>
                                </div>

                                <div class="form-group" *ngIf="!forgetPassword.get('password')?.disabled">
                                    <div class="input-group">
                                        <input [type]="hide ? 'password' : 'text'" name="password" #e1 required
                                            id="password" formControlName="password" autocomplete="off"
                                            class="form-control input-sm rounded-0" placeholder="Password">
                                        <button mat-icon-button matSuffix (click)="hide = !hide"
                                            [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide"
                                            class="show-hide-fun">
                                            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                                        </button>
                                    </div>
                                    <div *ngIf="formFieldValidator('password')" class="text-danger">
                                        <span *ngIf="formFieldErrors('password')?.hasOwnProperty('required')">
                                            Password is required
                                        </span>
                                        <span *ngIf="formFieldErrors('password')?.hasOwnProperty('minlength')">
                                            Should be 4 characters
                                        </span>
                                        <span *ngIf="formFieldErrors('password')?.hasOwnProperty('maxlength')">
                                            Should be less then 14 characters
                                        </span>

                                    </div>
                                </div>

                                <div class="form-group" *ngIf="!forgetPassword.get('verifyPassword')?.disabled">
                                    <div class="input-group">
                                        <input [type]="reHide ? 'password' : 'text'" name="verifyPassword" #e1 required
                                            id="verifyPassword" formControlName="verifyPassword" autocomplete="off"
                                            class="form-control input-sm rounded-0" placeholder="Re-enter Password">
                                        <button mat-icon-button matSuffix (click)="reHide = !reHide"
                                            [attr.aria-label]="'Hide password'" [attr.aria-pressed]="reHide"
                                            class="show-hide-fun">
                                            <mat-icon>{{reHide ? 'visibility_off' : 'visibility'}}</mat-icon>
                                        </button>
                                    </div>
                                    <div *ngIf="formFieldValidator('verifyPassword')" class="text-danger">
                                        <span *ngIf="formFieldErrors('verifyPassword')?.hasOwnProperty('required')">
                                            Confirm password is required
                                        </span>
                                        <span *ngIf="formFieldErrors('verifyPassword')?.hasOwnProperty('minlength')">
                                            Should be 4 characters
                                        </span>
                                        <span *ngIf="formFieldErrors('verifyPassword')?.hasOwnProperty('maxlength')">
                                            Should be less then 14 characters
                                        </span>
                                    </div>
                                    <span *ngIf=" forgetPassword.errors?.hasOwnProperty('match_error')" class="text-danger">Passwords
                                        must match</span>
                                </div>
                                <button *ngIf="forgetPassword.get('otp')?.disabled" type="submit"
                                    class="btn bg-theme-color btn-block rounded-0" (click)="submit()"
                                    [disabled]="forgetPassword.invalid">Submit</button>

                                <button *ngIf="!forgetPassword.get('verifyPassword')?.disabled" type="submit"
                                    class="btn bg-theme-color btn-block rounded-0" (click)="resetPassword()"
                                    [disabled]="forgetPassword.invalid">Reset Password</button>

                                <!-- <span class="text-danger mt-1">{{msg}}</span> -->
                                <div *ngIf="invalidPassword" class="error text-danger">
                                    <div>Entered passwords didn't match. </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>